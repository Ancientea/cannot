# 明日方舟投资模拟器自动化工具

这是一个用于明日方舟投资模拟器的自动化工具，可以自动识别游戏界面、预测胜率并进行自动操作。

## 功能特点

- 自动识别游戏界面中的怪物类型和数量
- 使用深度学习模型预测对战胜率
- 自动进行投资操作
- 自动收集训练数据
- 实时显示统计信息
- 支持手动和自动模式

## 安装要求

1. Python 3.7+
2. 安装Tesseract-OCR
    - 下载[Tesseract-OCR安装包](https://github.com/UB-Mannheim/tesseract/wiki)
    - 将安装目录添加到系统环境变量

## 安装步骤

1. 克隆仓库：

```bash
git clone [仓库地址]
cd [项目目录]
```

2. 安装依赖：

```bash
pip install -r requirements.txt
```

3. 确保Tesseract-OCR已正确安装并配置

## 使用说明

1. 运行主程序：

```bash
python main.py
```

2. 界面功能说明：
    - 【自动获取数据】：开始自动模式
    - 【识别】：手动识别当前界面
    - 【重选范围】：重新选择识别区域
    - 【预测】：使用模型预测胜率
    - 【填写√】：记录正确预测
    - 【填写×】：记录错误预测
    - 【归零】：清空所有数据

3. 自动模式设置：
    - 在"当次训练时长"输入框中设置运行时间（小时）
    - 输入-1表示单次操作
    - 按ESC键可随时停止自动运行

## 文件说明

- `main.py`：主程序，包含GUI界面
- `recognize.py`：图像识别相关功能
- `OCR.py`：文字识别相关功能
- `train.py`：模型训练相关功能
- `loadData.py`：数据加载和处理功能

## 注意事项

1. 首次运行需要手动选择识别区域
2. 确保游戏窗口清晰可见
3. 建议使用1920x1080分辨率
4. 程序运行时请勿遮挡游戏窗口

## 统计信息

程序会自动记录以下统计信息：

- 总填写次数
- 错误预测次数
- 运行时长

统计信息保存在`log.txt`文件中。

## 模型训练

收集足够的训练数据后，可以重新训练模型：

1. 确保`arknights.csv`中有足够的训练数据
2. 运行训练程序：

```bash
python train.py
```

## 常见问题

1. 识别不准确：
    - 检查游戏窗口是否清晰
    - 重新选择识别区域
    - 确保分辨率正确

2. OCR识别错误：
    - 检查Tesseract-OCR安装是否正确
    - 确保图像清晰度

3. 自动模式不工作：
    - 检查游戏窗口位置
    - 确保分辨率设置正确
    - 检查是否有其他窗口遮挡 